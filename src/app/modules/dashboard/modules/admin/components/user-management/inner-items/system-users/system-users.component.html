<div class="table-header">
  <!--  <div class="search">-->
  <!--    <div class="search-input-wrapper">-->
  <!--      <i class="pi pi-search search-icon"></i>-->
  <!--      <input-->
  <!--        pInputText-->
  <!--        type="text"-->
  <!--        placeholder="Search"-->
  <!--        [(ngModel)]="searchText"-->
  <!--      />-->
  <!--    </div>-->
  <!--  </div>-->
  <div class="tool-bar">
    <app-system-user-tool-bar
      (reloadTable)="reloadData()">
    </app-system-user-tool-bar>
  </div>
</div>

<div class="table-outer">
  <div class="card">
    <p-table
      [value]="admins"
      [paginator]="false"
      [rows]="5"
      [rowsPerPageOptions]="[5, 10, 20]"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width:10%">#</th>
          <th style="width:30%">Name</th>
          <th style="width:30%">User Name</th>
          <th style="width:30%">Tools</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-q let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td>{{ q.fullName | truncate:30 }}</td>
          <td>{{ q.userName | truncate:35 }}</td>
          <td>
            <button
              pButton
              type="button"
              icon="pi pi-eye"
              class="p-button-text p-button-sm"
              pTooltip="View User"
              tooltipPosition="top"
              (click)="viewUser(q)"
            ></button>
            <button
              pButton
              type="button"
              icon="pi pi-pencil"
              class="p-button-text p-button-sm"
              pTooltip="Update User"
              tooltipPosition="top"
              (click)="updateUser(q)"
            ></button>

<!--            <button-->
<!--              pButton-->
<!--              type="button"-->
<!--              icon="pi pi-wrench"-->
<!--              class="p-button-text p-button-sm"-->
<!--              pTooltip="Manage Role"-->
<!--              tooltipPosition="top"-->
<!--              (click)="attachRoles(q)"-->
<!--            ></button>-->

            <button
              pButton
              type="button"
              icon="pi pi-trash"
              class="p-button-text p-button-sm p-button-danger"
              pTooltip="Delete User"
              tooltipPosition="top"
              (click)="deleteRoleDialogOpen(q.userId)"
            ></button>
          </td>
        </tr>
      </ng-template>

    </p-table>
    <ngx-skeleton-loader
      *ngIf="loading"
      count="5"
      animation="progress-dark"
      [theme]="{
        'border-radius': '5px',
          height: '40px',
        'background-color': '#ecf0f1',
      }"
    />
  </div>

  <div *ngIf="admins?.length === 0 && !loading" class="flex w-full justify-center
items-center h-[50px] bg-[#f2f2f2] rounded-b-lg">
    <span class="text-[16px] font-mono font-semibold text-[#777777]">No Users</span>
  </div>

</div>

<!--Edit user dialog box-->
<div class="card flex justify-center">
  <p-dialog header="Update User" [modal]="true" [(visible)]="visibleEditRoleDialogBox"
            (onHide)="onUpdateUserDialogHide()" [style]="{ width: '25rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">

    <app-update-user
      [selectedUser]=selectedUser
      (updateUser)="reloadData()">
    </app-update-user>

  </p-dialog>
</div>
<!--delete confirm dialog box-->
<div class="card flex justify-center">
  <p-dialog header="Delete Confirmation" [modal]="true" [(visible)]="visibleDeleteRoleDialogBox"
            [style]="{ width: '26rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  >
    <app-delete-dialog-content
      (cansel)="canselDelete()"
      (deleteConfirmed)="deleteRole()"
    >
    </app-delete-dialog-content>
  </p-dialog>
</div>
<!--view use dialog box-->
<div class="card flex justify-center">
  <p-dialog header="View System User" [modal]="true" [(visible)]="visibleViewUserDialogBox"
            [style]="{ width: '25rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">

   <app-view-user
     [selectedUser]=selectedUser
   >
   </app-view-user>

  </p-dialog>
</div>
<!--Attach roles dialog box-->
<div class="card flex justify-center">
  <p-dialog header="Manage Role" [modal]="true" [(visible)]="visibleAttachRoleDialogBox"
             [style]="{ width: '25rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">

    <app-attach-roles-to-admin
      [selectedUser]=selectedUser
      (reloadUsers)="closeAttachAndReload()"
    >
    </app-attach-roles-to-admin>

  </p-dialog>
</div>
